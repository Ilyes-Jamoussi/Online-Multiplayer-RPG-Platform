<app-ui-page-layout [hasHeader]="true" [hasFooter]="true" [showBackButton]="true" headerTitle="Waiting Room" (backClick)="onBack()">
    <div class="waiting-room-content">
        <div class="left-panel">
            <div class="players-section">
                <div class="header">
                    <h2><i class="material-icons">group</i> Players</h2>
                    <div class="player-info">
                        @if (showCTFRule()) {
                        <span class="ctf-rule">CTF Mode: even number required</span>
                        }
                        <span class="player-count">{{ players().length }} / {{ maxPlayers() }}</span>
                    </div>
                </div>
                <div class="players-list">
                    @for (player of players(); track player.id) { @if (isVirtualPlayer(player)) {
                    <app-virtual-player-card [player]="player" />
                    } @else {
                    <app-player-card [player]="player" />
                    } }
                </div>
                @if (isRoomLocked()) {
                <div class="lock-message">
                    <i class="material-icons">lock</i>
                    The room is locked, no more players can join
                </div>
                }
            </div>
        </div>

        <div class="right-panel">
            <app-chat [showWrapper]="true"></app-chat>
        </div>
    </div>

    <div slot="footer">
        <app-waiting-room-actions></app-waiting-room-actions>
    </div>
</app-ui-page-layout>
