<div class="game-session-container">
    <!-- Sidebar gauche : Liste des joueurs -->
    <aside class="left-sidebar">
        <app-players-list></app-players-list>
    </aside>

    <main class="game-area">
            <div class="game-header">
                <app-turn-timer></app-turn-timer>
                
                <div class="game-info-header">
                    <div class="info-item">
                        <span class="info-label">Carte</span>
                        <span class="info-value">{{ getMapSizeLabel() }}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Joueurs</span>
                        <span class="info-value">{{ getPlayersCount() }}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Actif</span>
                        <span class="info-value active">{{ activePlayer }}</span>
                    </div>
                </div>
                
                <div class="header-actions">
                    @if (!isGameStarted && isMyTurn) {
                    <button class="action-btn start-game-btn" (click)="onStartGame()">
                        <span class="btn-icon">‚ñ∂Ô∏è</span>
                        <span class="btn-text">D√©marrer</span>
                    </button>
                    }
                    
                    <button class="action-btn primary" [disabled]="!isMyTurn || !isGameStarted" (click)="onEndTurn()">
                        <span class="btn-icon">‚úì</span>
                        <span class="btn-text">Terminer le tour</span>
                    </button>
                    
                    <button class="action-btn secondary" [disabled]="isActionDisabled()" (click)="onAction()">
                        <span class="btn-icon">‚ö°</span>
                        <span class="btn-text">Action</span>
                    </button>
                    
                    <button class="action-btn danger" (click)="onLeaveGame()">
                        <span class="btn-icon">üö™</span>
                        <span class="btn-text">Abandonner</span>
                    </button>
                </div>
            </div>

        <div class="game-map-container">
            @if (gameId) {
            <app-game-map [gameId]="gameId"></app-game-map>
            } @else {
            <div class="error-state">
                <div class="error-icon">‚ö†Ô∏è</div>
                <h3>Aucune carte de jeu disponible</h3>
                <p>Retourne √† la salle d'attente et red√©marre le jeu</p>
            </div>
            }
        </div>
    </main>

    <aside class="right-sidebar">
        <app-player-info></app-player-info>
    </aside>
</div>

@if (isTransitioning) {
<div class="transition-overlay" (click)="$event.stopPropagation()">
    <div class="transition-modal">
        <h2>{{ transitionMessage }}</h2>
        <div class="loading-spinner">
            <p>{{ timeRemaining }}</p>
        </div>
    </div>
</div>
}

<app-combat-overlay></app-combat-overlay>

<app-game-over-overlay></app-game-over-overlay>
