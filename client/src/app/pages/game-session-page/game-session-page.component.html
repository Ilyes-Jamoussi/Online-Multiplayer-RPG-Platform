<div class="game-session-grid">
    <aside class="players-list-container">
        <app-players-list></app-players-list>
    </aside>

    <div class="game-map-container">
        <app-game-map-header></app-game-map-header>
        <div class="game-map-content">
            @if (gameId) {
            <app-game-map [gameId]="gameId"></app-game-map>
            } @else {
            <div class="error-state">
                <div class="error-icon">⚠️</div>
                <h3>Aucune carte de jeu disponible</h3>
                <p>Retourne à la salle d'attente et redémarre le jeu</p>
            </div>
            }
        </div>
        <app-game-map-footer></app-game-map-footer>
    </div>

    <aside class="player-info-container">
        <app-player-info></app-player-info>
        <app-messages-zone></app-messages-zone>
    </aside>
</div>

@if (isTransitioning) {
<div class="transition-overlay" (click)="$event.stopPropagation()">
    <div class="transition-modal">
        <h2>{{ transitionMessage }}</h2>
        <div class="loading-spinner">
            <p>{{ timeRemaining }}</p>
        </div>
    </div>
</div>
}

<app-admin-badge></app-admin-badge>

<app-combat-overlay></app-combat-overlay>

<app-sanctuary-overlay></app-sanctuary-overlay>

<app-flag-transfer-overlay></app-flag-transfer-overlay>

<app-game-over-overlay></app-game-over-overlay>

<app-toast></app-toast>
