<app-ui-page-layout [hasHeader]="true" [hasFooter]="true" headerTitle="Cr√©ation de personnage" [showBackButton]="true" (backClick)="onBack()">
    <div class="layout">
        <section class="card" aria-label="S√©lection d'avatar">
            <div class="card-body">
                <app-avatar-grid />
            </div>
        </section>

        <section class="card" aria-label="Param√®tres du personnage">
            <div class="card-body">
                <div class="field">
                    <h3>Nom *</h3>
                    <app-ui-input
                        type:TEXT
                        placeholder="Nom du h√©ros"
                        [value]="character.name"
                        (valueChange)="onNameChange($event)"
                        [maxLength]="characterNameMaxLength"
                        [minLength]="characterNameMinLength"
                    ></app-ui-input>
                </div>

                <div class="field">
                    <h3>Vie</h3>
                    <app-stats-bar
                        label="Nombre de points de vie du personnage"
                        [value]="character.attributes.life"
                        [maxValue]="6"
                        color="#e74c3c"
                    ></app-stats-bar>
                </div>

                <div class="field">
                    <h3>Vitesse</h3>
                    <app-stats-bar label="Rapidit√© du personnage" [value]="character.attributes.speed" [maxValue]="6" color="#2ecc71"></app-stats-bar>
                </div>

                <div class="field">
                    <h3>Bonus (+2)</h3>
                    <div class="radio-row" role="radiogroup">
                        <label class="radio" [class.on]="isLifeBonusSelected">
                            <input type="radio" name="bonus" value="life" [checked]="isLifeBonusSelected" (change)="onBonusChange(bonusType.Life)" />
                            <span>‚ù§Ô∏è Vie</span>
                        </label>
                        <label class="radio" [class.on]="isSpeedBonusSelected">
                            <input
                                type="radio"
                                name="bonus"
                                value="speed"
                                [checked]="isSpeedBonusSelected"
                                (change)="onBonusChange(bonusType.Speed)"
                            />
                            <span>‚ö° Rapidit√©</span>
                        </label>
                    </div>
                </div>

                <div class="field">
                    <h3>Choix des d√©s</h3>
                    <p class="sub">Assignez une combinaison de d√©s</p>

                    <div class="dice-rows">
                        <div class="dice-card">
                            <span> Attaque: @if (isAttackD4Selected) { D4 } @else if (isAttackD6Selected) { D6 } @else { (Aucun) } </span>
                            <div class="dice-row">
                                <button type="button" class="dice-btn" [class.sel]="isAttackD4Selected" (click)="onAttackDiceChange(dice.D4)">
                                    <img [src]="getDiceImage(dice.D4)" [alt]="dice.D4" />
                                </button>
                                <button type="button" class="dice-btn" [class.sel]="isAttackD6Selected" (click)="onAttackDiceChange(dice.D6)">
                                    <img [src]="getDiceImage(dice.D6)" [alt]="dice.D6" />
                                </button>
                            </div>
                        </div>

                        <div class="dice-card">
                            <span> D√©fense: @if (isDefenseD4Selected) { D4 } @else if (isDefenseD6Selected) { D6 } @else { (Aucun) } </span>
                            <div class="dice-row">
                                <button type="button" class="dice-btn" [class.sel]="isDefenseD4Selected" (click)="onDefenseDiceChange(dice.D4)">
                                    <img [src]="getDiceImage(dice.D4)" [alt]="dice.D4" />
                                </button>
                                <button type="button" class="dice-btn" [class.sel]="isDefenseD6Selected" (click)="onDefenseDiceChange(dice.D6)">
                                    <img [src]="getDiceImage(dice.D6)" [alt]="dice.D6" />
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <div slot="footer" class="actions">
        <app-ui-button (buttonClick)="generateRandomCharacter()">üé≤ G√©n√©rer al√©atoire</app-ui-button>
        <app-ui-button (buttonClick)="onSubmit()" [disabled]="!canCreateCharacter">Cr√©er le personnage ‚Üí</app-ui-button>
        <app-errors-badge validationType="character-creation"></app-errors-badge>
    </div>
</app-ui-page-layout>
