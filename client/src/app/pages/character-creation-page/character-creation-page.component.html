<app-ui-page-layout [hasHeader]="true" [hasFooter]="true" headerTitle="Character Creation" [showBackButton]="true" (backClick)="onBack()">
    <div class="layout">
        <section class="card" aria-label="Avatar Selection">
            <div class="card-body">
                <app-avatar-grid />
            </div>
        </section>

        <section class="card" aria-label="Character Parameters">
            <div class="card-body">
                <div class="field">
                    <h3>Name *</h3>
                    <app-ui-input
                        type="text"
                        placeholder="Character name"
                        [value]="playerName"
                        (valueChange)="onNameChange($event)"
                        [maxLength]="characterNameMaxLength"
                        [minLength]="characterNameMinLength"
                    ></app-ui-input>
                </div>

                <div class="field">
                    <h3>Health</h3>
                    <app-stats-bar
                        label="Character health points"
                        [value]="playerHealth"
                        [maxValue]="maxStatValue"
                        color="#e74c3c"
                    ></app-stats-bar>
                </div>

                <div class="field">
                    <h3>Speed</h3>
                    <app-stats-bar label="Character speed" [value]="playerSpeed" [maxValue]="maxStatValue" color="#2ecc71"></app-stats-bar>
                </div>

                <div class="field">
                    <h3>Bonus (+{{ bonusStatValue }})</h3>
                    <div class="radio-row" role="radiogroup">
                        <label class="radio" [class.on]="isLifeBonusSelected">
                            <input type="radio" name="bonus" value="life" [checked]="isLifeBonusSelected" (change)="onBonusChange(bonusType.Life)" />
                            <span>‚ù§Ô∏è Health</span>
                        </label>
                        <label class="radio" [class.on]="isSpeedBonusSelected">
                            <input
                                type="radio"
                                name="bonus"
                                value="speed"
                                [checked]="isSpeedBonusSelected"
                                (change)="onBonusChange(bonusType.Speed)"
                            />
                            <span>‚ö° Speed</span>
                        </label>
                    </div>
                </div>

                <div class="field">
                    <h3>Dice Selection</h3>
                    <p class="sub">Assign a dice combination</p>

                    <div class="dice-rows">
                        <div class="dice-card">
                            <span> Attack: @if (isAttackD4Selected) { D4 } @else if (isAttackD6Selected) { D6 } @else { (None) } </span>
                            <div class="dice-row">
                                <button type="button" class="dice-btn" [class.sel]="isAttackD4Selected" (click)="onAttackDiceChange(dice.D4)">
                                    <img [src]="getDiceImage(dice.D4)" [alt]="dice.D4" loading="lazy" />
                                </button>
                                <button type="button" class="dice-btn" [class.sel]="isAttackD6Selected" (click)="onAttackDiceChange(dice.D6)">
                                    <img [src]="getDiceImage(dice.D6)" [alt]="dice.D6" loading="lazy" />
                                </button>
                            </div>
                        </div>

                        <div class="dice-card">
                            <span> Defense: @if (isDefenseD4Selected) { D4 } @else if (isDefenseD6Selected) { D6 } @else { (None) } </span>
                            <div class="dice-row">
                                <button type="button" class="dice-btn" [class.sel]="isDefenseD4Selected" (click)="onDefenseDiceChange(dice.D4)">
                                    <img [src]="getDiceImage(dice.D4)" [alt]="dice.D4" loading="lazy" />
                                </button>
                                <button type="button" class="dice-btn" [class.sel]="isDefenseD6Selected" (click)="onDefenseDiceChange(dice.D6)">
                                    <img [src]="getDiceImage(dice.D6)" [alt]="dice.D6" loading="lazy" />
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <div slot="footer" class="actions">
        <app-ui-button (buttonClick)="generateRandomCharacter()">üé≤ Generate Random</app-ui-button>
        <app-ui-button (buttonClick)="onSubmit()" [disabled]="!canCreateCharacter">Create Character ‚Üí</app-ui-button>
        <app-errors-badge validationType="character-creation"></app-errors-badge>
    </div>
</app-ui-page-layout>
