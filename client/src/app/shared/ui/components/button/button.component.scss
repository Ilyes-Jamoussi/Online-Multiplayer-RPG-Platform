@use 'sass:map';
@use 'theme' as *;

/* Base */
.uiBtn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-family: 'Press Start 2P', monospace;
    font-size: 0.75rem;
    text-transform: uppercase;
    font-weight: 700;
    cursor: pointer;
    position: relative;
    outline: none;

    border: 2px solid $ui-border;
    border-radius: 0;
    box-shadow: 4px 4px 0 $ui-shadow;
    transition:
        transform 0.1s ease,
        box-shadow 0.1s ease;

    &.isFull {
        width: 100%;
        display: inline-flex;
    }

    &.isDisabled {
        background: $ui-disabled-bg !important;
        color: $ui-disabled-fg !important;
        border-color: $ui-disabled-bord;
        box-shadow: 4px 4px 0 $ui-disabled-shadow;
        cursor: not-allowed;
        pointer-events: none;
        transform: none !important;
    }

    &.isLoading {
        cursor: wait;
        .btn-text {
            opacity: 0.85;
        }
    }

    &:hover:not(.isDisabled):not(.isLoading) {
        transform: translate(-2px, -2px);
        box-shadow: 6px 6px 0 $ui-shadow;
    }
    &:active:not(.isDisabled):not(.isLoading) {
        transform: translate(2px, 2px);
        box-shadow: 2px 2px 0 $ui-shadow;
    }
    &:focus-visible {
        outline: 2px dashed $ui-black;
        outline-offset: 2px;
    }

    /* sub-elements */
    .btn-icon {
        line-height: 1;
        display: inline-flex;
    }
    .btn-text {
        display: inline-flex;
        align-items: center;
    }
}

/* Variants depuis $ui-colors + $ui-contrasts */
.uiBtn {
    @each $name, $bg in $ui-colors {
        &.v-#{$name} {
            background: $bg;
            color: ui-contrast($name);
        }
    }
}

/* Sizes depuis $ui-sizes */
.uiBtn {
    @each $name, $cfg in $ui-sizes {
        &.s-#{$name} {
            padding: map.get($cfg, padding);
            font-size: map.get($cfg, font-size);
        }
    }
}

/* Shapes depuis $ui-shapes */
.uiBtn {
    @each $name, $radius in $ui-shapes {
        &.sh-#{$name} {
            border-radius: $radius;
        }
    }
}

/* Gaps depuis $ui-gaps */
.uiBtn {
    @each $name, $space in $ui-gaps {
        &.gap-#{$name} {
            gap: $space;
        }
    }
}

/* Alignement (optionnel : utilitaires statiques ou map si tu veux) */
.uiBtn {
    &.al-left {
        justify-content: flex-start;
    }
    &.al-center {
        justify-content: center;
    }
    &.al-right {
        justify-content: flex-end;
    }
    &.al-justify {
        justify-content: space-between;
    }
}

/* Icône à droite */
.uiBtn.iconRight {
    flex-direction: row-reverse;
}
