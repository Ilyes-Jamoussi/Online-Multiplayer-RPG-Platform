@use 'sass:color';
@use 'theme' as *;
@use 'sass:map';

.uiCheckbox {
    @include ui-hover-brightness;
    @include ui-active-effects;
    @include ui-popout-effects;
    @include ui-focus-state;
    @include ui-disabled-state;
    display: inline-flex;
    align-items: center;
    gap: ui-gap(sm);
    cursor: pointer;
    color: ui-contrast(primary);

    .checkbox-box {
        @include ui-component-base;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: ui-size(md, icon-size);
        height: ui-size(md, icon-size);
        border-radius: ui-shape(square);
        box-shadow: ui-elevation(xs);
        background: $ui-white; // fond neutre
    }

    .checkbox-indicator {
        line-height: 1;
        @include ui-size-variants;
    }

    .checkbox-label {
        user-select: none;
        @include ui-size-variants;
        @include ui-contrast-colors;
    }

    &.isChecked .checkbox-box {
        background: ui-color(primary);
        border-color: color.adjust(ui-color(primary), $lightness: -10%);
    }

    // Apply consistent states
    @include ui-disabled-state;
    @include ui-focus-state;

    // Custom hover effects for checkbox
    &:hover:not(.isDisabled) .checkbox-box {
        transform: translate(ui-interaction(hover-translate));
        box-shadow: ui-interaction(hover-shadow-offset) ui-interaction(hover-shadow-offset) 0 $ui-shadow;
    }

    &:hover.popOut:not(.isDisabled) .checkbox-box {
        transform: translate(ui-interaction(hover-translate));
        box-shadow: ui-interaction(hover-shadow-offset) ui-interaction(hover-shadow-offset) 0 $ui-shadow;
    }

    &:active:not(.isDisabled) .checkbox-box {
        transform: translate(ui-interaction(active-translate));
        box-shadow: ui-interaction(active-shadow-offset) ui-interaction(active-shadow-offset) 0 $ui-shadow;
    }

    // Variant colors for checked state
    @each $name, $color in $ui-colors {
        &.v-#{$name}.isChecked .checkbox-box {
            background: $color;
            border-color: color.adjust($color, $lightness: -10%);

            .checkbox-indicator {
                color: ui-contrast($name);
            }
        }
    }

    &.isIndeterminate .checkbox-box {
        background: ui-color(primary);
        border-color: $ui-border;
        .checkbox-indicator {
            opacity: 1;
            color: ui-contrast(primary);
            @include ui-size-variants;
        }
    }

    &.isDisabled .checkbox-box {
        background: $ui-disabled-bg !important;
        border-color: $ui-disabled-border !important;
        box-shadow: 4px 4px 0 $ui-disabled-shadow !important;
        @include ui-size-variants;
    }

    &:hover:not(.isDisabled) .checkbox-box {
        @include ui-hover-brightness;
        @include ui-size-variants;
    }
    &:active:not(.isDisabled) .checkbox-box {
        @include ui-active-effects;
        @include ui-size-variants;
    }

    .checkbox-box {
        @include ui-size-variants;
        @include ui-shape-variants;
        @include ui-elevation-variants;
        @include ui-size-variants;
    }
}
