@use 'theme' as *;

// ==================== INPUT COMPONENT ====================
.uiInput {
    // Base component setup
    @include ui-component-base;

    // Layout and display
    display: inline-flex;
    flex-direction: column;

    // Default styling
    background: $ui-white;
    box-shadow: ui-elevation(sm);
    border-radius: ui-shape(square);

    // Full width modifier
    &.isFull {
        width: 100%;
    }

    // Apply consistent states
    @include ui-disabled-state;
    @include ui-focus-state;
    @include ui-popout-effects;

    // Custom focus effects for input
    &:focus-within:not(.isDisabled) {
        transform: translate(ui-interaction(hover-translate));
        box-shadow: ui-interaction(hover-shadow-offset) ui-interaction(hover-shadow-offset) 0 $ui-shadow;
    }

    &:focus-within.popOut:not(.isDisabled) {
        transform: translate(ui-interaction(hover-translate));
        box-shadow: ui-interaction(hover-shadow-offset) ui-interaction(hover-shadow-offset) 0 $ui-shadow;
    }

    // Apply variant systems
    @include ui-shape-variants;
    @include ui-elevation-variants;
}

// ==================== INPUT LABEL ====================
.uiInput-label {
    display: flex;
    align-items: center;
    gap: ui-gap(xs);
    padding: ui-gap(sm) ui-gap(md);
    font-weight: 700;
    text-transform: uppercase;
    border-bottom: 2px solid $ui-border;

    // Default styling
    background: ui-color(primary);
    color: ui-contrast(primary);

    // Required indicator
    .req {
        color: ui-color(danger);
        font-weight: 700;
    }

    // Variant colors for label
    @each $name, $color in $ui-colors {
        .uiInput.v-#{$name} & {
            background: $color;
            color: ui-contrast($name);
        }
    }
}

// ==================== INPUT FIELD ====================
.uiInput-field {
    display: flex;
    align-items: center;
    gap: ui-gap(sm);
    position: relative;
    background: $ui-white;

    // Default padding
    padding: ui-size(md, padding);
    min-height: ui-size(md, height);

    // Size variants
    &.s-sm {
        padding: ui-size(sm, padding);
        min-height: ui-size(sm, height);
    }

    &.s-lg {
        padding: ui-size(lg, padding);
        min-height: ui-size(lg, height);
    }
}

// ==================== INPUT CONTROL ====================
.in-control {
    flex: 1 1 auto;
    min-width: 0;
    border: 0;
    outline: none;
    background: transparent;
    font: inherit;
    color: currentColor;
    line-height: 1.3;

    &::placeholder {
        opacity: 0.75;
        color: $ui-gray;
    }
}

// ==================== INPUT ICONS ====================
.in-icon {
    line-height: 1;
    display: inline-flex;
    align-items: center;
    color: $ui-gray;
    font-size: ui-size(md, icon-size);

    &.prefix {
        order: -1;
    }

    &.suffix {
        order: 1;
    }

    // Size variants for icons
    .uiInput.s-sm & {
        font-size: ui-size(sm, icon-size);
    }

    .uiInput.s-lg & {
        font-size: ui-size(lg, icon-size);
    }
}

// ==================== CLEAR BUTTON ====================
.clear-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 1.5rem;
    height: 1.5rem;
    border: none;
    background: transparent;
    color: $ui-gray;
    cursor: pointer;
    border-radius: ui-shape(pill);
    font-size: 1.2rem;
    line-height: 1;
    transition: all ui-transition(fast) ui-easing(ease);
    order: 2;

    &:hover {
        background: ui-color(danger);
        color: ui-contrast(danger);
        transform: scale(1.1);
    }

    &.isHidden {
        opacity: 0;
        pointer-events: none;
        width: 0;
        overflow: hidden;
    }

    // Size variants
    .uiInput.s-sm & {
        width: 1.25rem;
        height: 1.25rem;
        font-size: 1rem;
    }

    .uiInput.s-lg & {
        width: 1.75rem;
        height: 1.75rem;
        font-size: 1.4rem;
    }
}

// ==================== INPUT META ====================
.uiInput-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: ui-gap(xs) ui-gap(md);
    font-size: ui-size(sm, font-size);
    color: $ui-gray;
    border-top: 1px solid lighten($ui-border, 20%);

    .counter {
        margin-left: auto;
        font-weight: 700;

        // Color coding for counter
        .uiInput.s-sm & {
            font-size: 0.6rem;
        }

        .uiInput.s-lg & {
            font-size: 0.8rem;
        }
    }
}

// ==================== INPUT VARIANT OVERRIDES ====================
.uiInput {
    // Size-specific adjustments
    &.s-sm {
        font-size: ui-size(sm, font-size);

        .uiInput-field {
            padding: ui-size(sm, padding);
            min-height: ui-size(sm, height);
        }
    }

    &.s-lg {
        font-size: ui-size(lg, font-size);

        .uiInput-field {
            padding: ui-size(lg, padding);
            min-height: ui-size(lg, height);
        }
    }

    // Alignment variants
    @include ui-alignment-variants;

    // Gap variants for field spacing
    @include ui-gap-variants;
}
