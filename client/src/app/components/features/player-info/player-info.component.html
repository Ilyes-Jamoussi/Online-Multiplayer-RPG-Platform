<div class="player-info-panel">
    <div class="player-header">
        <div class="player-header-top">
            <img [src]="avatarImage" [alt]="playerName" class="avatar" loading="lazy" />
            <h3>
                {{ playerName }}
                @if (teamNumber !== undefined) {
                <span class="badge-team" [style.background-color]="getTeamColor(teamNumber)"> Team {{ teamNumber }} </span>
                } @if (hasFlag) {
                <span class="badge-flag">ðŸš©</span>
                }
            </h3>
        </div>
        <div class="hp-section">
            <div class="hp-bar">
                <div class="hp-fill" [style.width.%]="hpPercentage" [class]="hpColorClass"></div>
                <span class="hp-text">{{ currentHealth }}/{{ maxHealth }}</span>
            </div>
            @if (healthBonus > 0) {
            <div class="hp-bonus-info">{{ baseHealth }} + {{ healthBonus }} bonus</div>
            }
        </div>
    </div>

    <div class="stats-section">
        <div class="stats-columns">
            <div class="stats-column">
                <div class="stat-group">
                    <h4 class="stat-group-title">Speed</h4>
                    <div class="stat-item">
                        <span class="label">Base Speed</span>
                        <span class="value">{{ baseSpeed }}</span>
                    </div>
                    <div class="stat-item">
                        <span class="label">Bonus</span>
                        <span class="value">{{ speedBonus }}</span>
                    </div>
                    <div class="stat-item">
                        <span class="label">Boat Bonus</span>
                        <span class="value">{{ boatSpeedBonus }}</span>
                    </div>
                </div>

                <div class="stat-group">
                    <h4 class="stat-group-title">Defense</h4>
                    <div class="stat-item">
                        <span class="label">Base</span>
                        <span class="value">{{ baseDefense }}</span>
                    </div>
                    <div class="stat-item">
                        <span class="label">Selected Dice</span>
                        <span class="value">{{ defenseDiceType }}</span>
                    </div>
                    <div class="stat-item">
                        <span class="label">Bonus</span>
                        <span class="value">{{ defenseBonus }}</span>
                    </div>
                </div>
            </div>

            <div class="stats-column">
                <div class="stat-group">
                    <h4 class="stat-group-title">Attack</h4>
                    <div class="stat-item">
                        <span class="label">Base</span>
                        <span class="value">{{ baseAttack }}</span>
                    </div>
                    <div class="stat-item">
                        <span class="label">Selected Dice</span>
                        <span class="value">{{ attackDiceType }}</span>
                    </div>
                    <div class="stat-item">
                        <span class="label">Bonus</span>
                        <span class="value">{{ attackBonus }}</span>
                    </div>
                </div>

                <div class="stat-group">
                    <h4 class="stat-group-title">Combat</h4>
                    <div class="stat-item">
                        <span class="label">Combats</span>
                        <span class="value">{{ totalCombats }}</span>
                    </div>
                    <div class="stat-item">
                        <span class="label">Wins</span>
                        <span class="value combat-wins">{{ combatWins }}</span>
                    </div>
                    <div class="stat-item">
                        <span class="label">Losses</span>
                        <span class="value combat-losses">{{ combatLosses }}</span>
                    </div>
                    <div class="stat-item">
                        <span class="label">Draws</span>
                        <span class="value combat-draws">{{ combatDraws }}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
