<div class="players-list">
    <h3>Joueurs</h3>
    <div class="players-container">
        @for (player of orderedPlayers(); track player.id) {
        <div
            class="player-item"
            [class.active]="isActivePlayer(player)"
            [class.current-user]="isCurrentUser(player)"
            [class.abandoned]="hasAbandoned(player)"
        >
            <div class="player-info">
                <span class="player-name" [class.strikethrough]="hasAbandoned(player)">
                    {{ player.name }}
                </span>

                <div class="player-health">
                    <span class="health-value">{{ player.health }}/{{ player.maxHealth }}</span>
                    <div class="health-bar-small">
                        <div
                            class="health-bar-fill-small"
                            [style.width.%]="getHealthPercentage(player)"
                            [class.hp-high]="getHealthPercentage(player) > 70"
                            [class.hp-medium]="getHealthPercentage(player) > 30 && getHealthPercentage(player) <= 70"
                            [class.hp-critical]="getHealthPercentage(player) <= 30"
                        ></div>
                    </div>
                </div>

                <div class="player-badges">
                    @if (isAdmin(player)) {
                    <span class="badge admin">ðŸ‘‘</span>
                    } @if (isActivePlayer(player)) {
                    <span class="badge active">Tour actuel</span>
                    } @if (hasAbandoned(player)) {
                    <span class="badge abandoned">AbandonnÃ©</span>
                    }
                </div>
            </div>

            <div class="combat-wins">
                <span class="wins-count">{{ getCombatWins(player) }}</span>
                <span class="wins-label">victoires</span>
            </div>
        </div>
        }
    </div>
</div>
