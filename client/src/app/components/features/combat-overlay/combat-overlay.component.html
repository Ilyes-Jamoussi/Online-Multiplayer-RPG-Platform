@if (combatData) {
    <div class="combat-overlay">
        <div class="combat-modal">
            <app-combat-timer></app-combat-timer>
            
            <div class="combat-header">
                <h2>Combat en cours</h2>
            </div>
            
            <div class="combat-arena">
                <!-- Attaquant -->
                <div class="fighter attacker" [class.is-me]="combatData.userRole === 'attacker'">
                    <div class="fighter-name">{{ attackerName }}</div>
                    <div class="fighter-avatar">
                        <img [src]="attackerAvatar" [alt]="attackerName" />
                    </div>
                    <div class="fighter-role">Attaquant</div>
                </div>

                <!-- VS -->
                <div class="vs-section">
                    <div class="vs-text">VS</div>
                    <div class="combat-swords">‚öîÔ∏è</div>
                </div>

                <!-- Cible -->
                <div class="fighter target" [class.is-me]="combatData.userRole === 'target'">
                    <div class="fighter-name">{{ targetName }}</div>
                    <div class="fighter-avatar">
                        <img [src]="targetAvatar" [alt]="targetName" />
                    </div>
                    <div class="fighter-role">D√©fenseur</div>
                </div>
            </div>

            <div class="combat-actions">
                @if (combatData.userRole === 'attacker') {
                    <p class="combat-message">Tu attaques {{ targetName }} !</p>
                } @else {
                    <p class="combat-message">{{ attackerName }} t'attaque !</p>
                }
                
                <p class="stance-instruction">Choisissez votre posture :</p>
                
                <div class="action-buttons">
                    <button class="combat-btn offensive" (click)="chooseOffensive()">
                        ‚öîÔ∏è Offensive (+2 Attaque)
                    </button>
                    <button class="combat-btn defensive" (click)="chooseDefensive()">
                        üõ°Ô∏è D√©fensive (+2 D√©fense)
                    </button>
                </div>
            </div>
        </div>
    </div>
}
